<!DOCTYPE html>
<html lang="en">

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>cmdr-nova@internet:~$ | NOVA PRIME</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="cmdr-nova@internet:~$" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="NOVA PRIME" />
<meta property="og:description" content="NOVA PRIME" />
<meta property="og:image" content="https://nova.mkultra.monster/img/nova.png">
<link rel="canonical" href="https://nova.mkultra.monster/" />
<meta property="og:url" content="https://nova.mkultra.monster" />
<meta property="og:site_name" content="cmdr-nova@internet:~$" />
<meta property="og:type" content="website" />
<link rel="next" href="https://nova.mkultra.monster/page2" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://nova.mkultra.monster/img/nova.png">
<meta property="twitter:title" content="cmdr-nova@internet:~$" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"NOVA PRIME","headline":"cmdr-nova@internet:~$","name":"cmdr-nova@internet:~$","url":"https://nova.mkultra.monster"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://nova.mkultra.monster/feed.xml" title="cmdr-nova@internet:~$" />
<link rel="stylesheet" href="/assets/modal.css" />
<link rel="stylesheet" href="/assets/mastodonShare.css" />
<script src="/assets/js/mastodonShare.js"></script>
<script src="https://unpkg.com/@phosphor-icons/web"></script>
<script src="/assets/js/opennav.js"></script>
<link rel="stylesheet" href="https://furryring.neocities.org/onionring.css">
<meta name="robots" content="noai, noimageai" />
<link
href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Montserrat:wght@400;700&display=swap"
rel="stylesheet"/>



    





  <body><header class="site-header" role="banner">
<!-- vanishing sidebar -->
<table>
  <tr>
    <td>
<div class="nav-wrapper">
  <div id="mySidenav" class="sidenav">
  
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"><i class="ph ph-x"></i></a>
  <center>
    <img src="/img/gifs/skull.gif" width="100" height="100"><br>
  </center>
  
  <div class="trigger">
    <b></b>
  </div>
  
  <br />
  
  <div class="trigger">
    <font color="#FFFFFF">
      <p>‚ñë Main</p>
    </font>
      <a class="page-link" href="/">&#8711; H O M E &#8711; <i class="ph ph-house"></i></a>
      <a class="page-link" href="/pages/about/">About <i class="ph ph-user"></i></a>
      <a class="page-link" href="/pages/debian/">Install Debian <i class="ph ph-linux-logo"></i></i></a>
      <a class="page-link" href="/pages/activitypub/">Join ActivityPub <i class="ph ph-network-x"></i></a>
      <a class="page-link" href="/pages/why/">Why <i class="ph ph-question"></i></a>
      <a class="page-link" href="/pages/disco/">Discography <i class="ph ph-disc"></i></a>
      <a class="page-link" href="/pages/next/">Next <i class="ph ph-arrow-circle-right"></i></a>
      <a class="page-link" href="/pages/blogroll/">Blogroll <i class="ph ph-door-open"></i></a>
      <a class="page-link" href="/pages/podroll/">Podroll <i class="ph ph-broadcast"></i></a>
      <a class="page-link" href="/pages/books/">Books <i class="ph ph-book"></i></a>
      <a class="page-link" href="/pages/second-life/">Second Life <i class="ph ph-cube-focus"></i></a>
      <a class="page-link" href="/pages/howtosl/">HowtoSL <i class="ph ph-tag-chevron"></i></a>
      <a class="page-link" href="/pages/scrap/">Scrap <i class="ph ph-film-strip"></i></a>
      <a class="page-link" href="/pages/dnd/">DnD <i class="ph ph-sword"></i></a>
      <a class="page-link" href="/pages/haxpunks/">haxPunks <i class="ph ph-images-square"></i></a>
      <a class="page-link" href="/pages/archives/">Archives <i class="ph ph-archive"></i></a>
      <a class="page-link" href="/pages/log/">Log <i class="ph ph-dev-to-logo"></i></a>
      <br />
    </div>
  
  <div class="trigger">
    <font color="#FFFFFF">
      <p>‚ñë Me</p>
    </font>
      <a class="page-link" href="/portfolio/">Portfolio <i class="ph ph-briefcase"></i></a>
      <a class="page-link" href="https://mkultra.monster/@cmdr_nova" target="_blank">Mastodon <i class="ph ph-mastodon-logo"></i></a>
      <a class="page-link" href="https://bsky.app/profile/cmdr-nova.bsky.social" target="_blank">Bluesky <i class="ph ph-butterfly"></i></a>
      <a class="page-link" href="https://pixelfed.social/i/web/profile/589916902467976131" target="_blank">Pixelfed <i class="ph ph-aperture"></i></a>
      <a class="page-link" href="https://www.threads.net/@cmdr_nova" target="_blank">Threads <i class="ph ph-threads-logo"></i></a>
      <a class="page-link" href="https://www.instagram.com/cmdr_nova/" target="_blank">Instagram <i class="ph ph-instagram-logo"></i></a>
      <a class="page-link" href="https://github.com/cmdr-nova" target="_blank">Github <i class="ph ph-github-logo"></i></a>
      <a class="page-link" href="https://www.tiktok.com/@cmdr_nova" target="_blank">Tiktok <i class="ph ph-tiktok-logo"></i></a>
      <a class="page-link" href="https://discord.gg/2yfrCBDjnK" target="_blank">Discord <i class="ph ph-discord-logo"></i></a>
      <a class="page-link" href="https://matrix.to/#/@cmdr_nova:matrix.org" target="_blank">Matrix <i class="ph ph-matrix-logo"></i></a>
      <a class="page-link" href="https://liberapay.com/cmdr-nova" target="_blank">Liberapay <i class="ph ph-money-wavy"></i></a>
      <a class="page-link" href="https://www.youtube.com/channel/UCmEkfR480A4kdNJyuP5ny4Q" target="_blank">Youtube <i class="ph ph-youtube-logo"></i></a>
      <a class="page-link" href="https://www.linkedin.com/in/fortney-ryan" target="_blank">LinkedIn <i class="ph ph-linkedin-logo"></i></a>
      <a class="page-link" href="https://www.twitch.tv/cmdr__nova" target="_blank">Twitch <i class="ph ph-twitch-logo"></i></a>
      <a class="page-link" href="https://my.secondlife.com/nova.ayashi" target="_blank">Second Life <i class="ph ph-codepen-logo"></i></a>
      <a class="page-link" href="https://www.primfeed.com/nova.ayashi" target="_blank">Primfeed <i class="ph ph-box-arrow-down"></i></a>
      <br />
    </div>
    
  </div>
  <span style="text-decoration: none; font-size:21px;cursor:pointer;color:#c8ff00;" onclick="openNav()"><center><i class="ph ph-list"></i>N A V</center></span>
  </div>
  </td>
  </tr>
  </table>
  <!-- vanishing sidebar -->

<!-- Sidebar Section-->
<div id="sidebar">
  <table>

    <tr>
      <td>
        
        <div align="center">
          <p id="date">
          <script>n =  new Date();
            y = n.getFullYear();
            m = n.getMonth() + 1;
            d = n.getDate();
            document.getElementById("date").innerHTML = m + "/" + d + "/" + y;</script>
            </p>
            
            <p>
        <span id="swatchClock">@000</span>
        <script defer src="https://melonking.net/scripts/swatchTime.js"></script>
        </p>

      <div class="nova-avie">
        <p>
          <img src="/img/avatar/nova_2025_3.png" width="90%" height="90%">
        </p>
      </div>
      <button class="post-buttons" onclick="window.open('https://liberapay.com/cmdr-nova/donate', '_blank')">Subscribe via Liberapay</button>
        <br />

<div id="todo">
  <br />
  Todo list:
  <ul>
    <li><s>contribute to wafrn code</s></li>
    <li>optimize the css on this site</li>
    <li>keep sending out the resume</li>
  </ul> 
</div>

<br />

    <center>
      <div class="c-box">
      <iframe src="https://www3.cbox.ws/box/?boxid=3540311&boxtag=zRBWri" width="100%" height="450" allowtransparency="yes" allow="autoplay" frameborder="0" marginheight="0" marginwidth="0" scrolling="auto"></iframe>
      <img src="/img/home_button.png">
    </div>
      </center>
<br />

<hr>

<br />

<div class="garden-button">
<p>Get yourself a <a href="/linkgarden/for_you" target="_blank">LinkGarden</a></p>
</div> 

<hr class="solid">
<br />

<div class="reddit-bot">
  <!-- Reddit-Bot (via Tumblr):<br /> -->
  <div id="tumblr-feed-container"></div> <!-- Specific container for the Tumblr feed -->
  <script src="/assets/js/tumblr.js"></script>

</div>
</td>
  </tr>
</table>
</div>
<!-- Side Bar Section End -->

  </header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Jekyll Blog, Post to Mastodon | cmdr-nova@internet:~$</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Jekyll Blog, Post to Mastodon" />
<meta name="author" content="êï£ C M D R ‚ñë NOVA êï£" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="It‚Äôs been a hell of a time! Earlier in the week, I suddenly had an issue where I broke my RSS feed bot that posted new feed items from my blog to my Mastodon account. I described this in my last post, but it was entirely because I ‚Ä¶ edited the XML. So! I spent the last entire day rebuilding a brand new way to do this. By turning VS Code‚Äôs ‚Äúcommit‚Äù button into a ‚ÄúPost to Mastodon‚Äù button. Let me explain." />
<meta property="og:description" content="It‚Äôs been a hell of a time! Earlier in the week, I suddenly had an issue where I broke my RSS feed bot that posted new feed items from my blog to my Mastodon account. I described this in my last post, but it was entirely because I ‚Ä¶ edited the XML. So! I spent the last entire day rebuilding a brand new way to do this. By turning VS Code‚Äôs ‚Äúcommit‚Äù button into a ‚ÄúPost to Mastodon‚Äù button. Let me explain." />
<link rel="canonical" href="http://localhost:4000/programming/2024/11/07/jekyll-blog-post-to-mastodon.html" />
<meta property="og:url" content="http://localhost:4000/programming/2024/11/07/jekyll-blog-post-to-mastodon.html" />
<meta property="og:site_name" content="cmdr-nova@internet:~$" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-11-07T22:28:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Jekyll Blog, Post to Mastodon" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"êï£ C M D R ‚ñë NOVA êï£"},"dateModified":"2024-11-07T22:28:00-05:00","datePublished":"2024-11-07T22:28:00-05:00","description":"It‚Äôs been a hell of a time! Earlier in the week, I suddenly had an issue where I broke my RSS feed bot that posted new feed items from my blog to my Mastodon account. I described this in my last post, but it was entirely because I ‚Ä¶ edited the XML. So! I spent the last entire day rebuilding a brand new way to do this. By turning VS Code‚Äôs ‚Äúcommit‚Äù button into a ‚ÄúPost to Mastodon‚Äù button. Let me explain.","headline":"Jekyll Blog, Post to Mastodon","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/programming/2024/11/07/jekyll-blog-post-to-mastodon.html"},"url":"http://localhost:4000/programming/2024/11/07/jekyll-blog-post-to-mastodon.html"}</script>
<!-- End Jekyll SEO tag -->


<div id="main">
  <table>
<tr>
<td>
 <md-block>

  <a class="read-title" href="/">Jekyll Blog, Post to Mastodon</a> 


<p class="author center-align"><i class="ph ph-pencil-line"></i> Author: <a href="https://mkultra.monster/@cmdr_nova" target="_blank">êï£ C M D R ‚ñë NOVA êï£</a>
  <br />
<i class="ph ph-calendar"></i> Published: 07 Nov 2024
<br /><br />
  <button class="post-buttons" onclick="window.open('https://liberapay.com/cmdr-nova/donate', '_blank')">Subscribe via Liberapay</button>
  <button class="post-buttons" onclick="window.open('https://mkultra.monster/@cmdr_nova', '_blank')">Follow on Mastodon</button>
  <button class="post-buttons" onclick="window.open('https://bsky.app/profile/cmdr-nova.bsky.social', '_blank')">Follow on Bluesky</button>
  <button class="post-buttons" onclick="window.open('https://github.com/sponsors/cmdr-nova', '_blank')">Sponsor on GitHub</button>
</p>
<br />

<p>It‚Äôs been a hell of a time! Earlier in the week, I suddenly had an issue where I broke my RSS feed bot that posted new feed items from my blog to my Mastodon account. I described this in my last post, but it was entirely because I ‚Ä¶ edited the XML. So! I spent the last entire day rebuilding a brand new way to do this. By turning VS Code‚Äôs ‚Äúcommit‚Äù button into a ‚ÄúPost to Mastodon‚Äù button. Let me explain.</p>

<p>I‚Äôve been using ‚ÄúDeploy to Neocities‚Äù for a while, so I had a basis to work with already. I figured, all I‚Äôd have to do ‚Ä¶ is tell Github to build the site, and then construct the URL from what it would usually be on my website.</p>

<p>The next thing I had to make it do, was SSH into my VPS, because you can‚Äôt run Python on Neocities.</p>

<p>My first attempt was to work with a custom Ruby plugin, and have <em>that</em> build the post content, and then send it along with the constructed URL to a Python script on my VPS that would then jumble it all together and post it. But that didn‚Äôt work. Because Jekyll apparently does not like custom Rubies ‚Ä¶ I guess?</p>

<p>Also, if that sounds really convoluted and a round-a-about way of doing things, that‚Äôs <em>because it is</em>.</p>

<p>So, I went to sleep, then I went to work. And I mulled it over in my head, ‚ÄúWhy not just have the build process construct the URL, look for new posts, and then dump it into the pipeline to your server, where it‚Äôs constructed, and posted.‚Äù</p>

<p>Behold.</p>

<p><code>
    - name: Check for new posts
      id: check_new_posts
      run: |
        new_post=false
        post_url=""
        current_date=$(TZ=America/New_York date +%Y-%m-%d)
        base_url="https://nova.mkultra.monster"
        echo "Current date: $current_date"
        for file in $(git log --diff-filter=A --name-only HEAD); do
          echo "Checking file: $file"
          if [[ $file == _posts/* ]]; then
            echo "File is in _posts directory"
            post_date=$(basename $file | cut -d'-' -f1-3)
            post_year=$(basename $file | cut -d'-' -f1)
            post_month=$(basename $file | cut -d'-' -f2)
            post_day=$(basename $file | cut -d'-' -f3)
            post_title=$(basename $file | cut -d'-' -f4- | sed 's/\.md$//')
            post_category=$(grep -m 1 '^categories:' $file -A 1 | tail -n 1 | sed 's/- //;s/"//g;s/ //g' | tr '[:upper:]' '[:lower:]')
            echo "Post date: $post_date"
            echo "Post category: $post_category"
            echo "Current date: $current_date"
            if [[ $post_date == $current_date ]]; then
              new_post=true
              post_url="$base_url/$post_category/$post_year/$post_month/$post_day/$post_title.html"
              echo "New post detected: $post_url"
              break
            else
              echo "Post date does not match current date"
            fi
          else
            echo "File is not in _posts directory"
          fi
        done
        echo "new_post=$new_post" &gt;&gt; $GITHUB_ENV
        echo "post_url=$post_url" &gt;&gt; $GITHUB_ENV
        echo "Post URL: $post_url"
</code>
<code>
    - name: Start SSH agent
      uses: webfactory/ssh-agent@v0.5.3
      with:
        ssh-private-key: $
</code>
<code>
    - name: Post to Mastodon
      if: env.new_post == 'true'
      env:
        MASTODON_API_KEY: $
        POST_URL: $
      run: |
        echo "Posting to Mastodon: ${POST_URL}"
        ssh -o StrictHostKeyChecking=no root@my_vps_ip "source ~/masto-poast/masto-poast-env/bin/activate &amp;&amp; MASTODON_API_KEY=$ python3 ~/masto-poast/poast.py '${POST_URL}'"
</code></p>

<p>But wait! THERE‚ÄôS MORE!</p>

<p><img src="/img/posts/poast/wait.gif" /></p>

<p>The code above is everything Jekyll does by itself on Github until it reaches the point it can do no more, because static sites are a bit limited. But that‚Äôs okay! Static sites are great! But ‚Ä¶ for what we‚Äôre doing, we need to connect to my VPS, which is accomplished easily at the end of the build process.</p>

<p>Once connected, it activates the environment, and then runs the Python script, which is as follows.</p>

<p><code>                                                                        
import os
import sys
import requests
from bs4 import BeautifulSoup
</code>
<code>
MASTODON_API_URL = 'https://mkultra.monster/api/v1/statuses'
ACCESS_TOKEN = os.getenv('MASTODON_API_KEY')
POSTED_URLS_FILE = 'posted_urls.txt'
</code>
<code>
def extract_summary_and_tag(post_url):
    response = requests.get(post_url)
    soup = BeautifulSoup(response.content, 'html.parser')
</code>
<code>
    # Extract the second &lt; p &gt; tag within the #main div as a summary
    main_div = soup.find('div', {'id': 'main'})
    if main_div:
        paragraphs = main_div.find_all('p')
        summary = paragraphs[1].get_text() if len(paragraphs) &gt; 1 else "No summary available"
    else:
        summary = "No summary available"
</code>
<code>    
    # Extract the tag from the &lt; span &gt; within the #main div
    tag_span = None
    if main_div:
        for span in main_div.find_all('span'):
            if 'tag:' in span.get_text().lower():
                tag_span = span
                break
</code>
<code>    
    if tag_span:
        tag_link = tag_span.find('a')
        if tag_link:
            tag = tag_link.get_text(strip=True)
            print(f"Extracted tag: {tag}")
        else:
            tag = ""
            print("No &lt; a &gt; tag found within &lt; span &gt;")
    else:
        tag = ""
        print("No &lt; span &gt; tag found with 'tag:' text")
</code>
<code>
    hashtag = f"#{tag.replace(' ', '').lower()}" if tag else ""
</code>
<code>
    return summary, hashtag
</code>
<code>
def post_to_mastodon(content):
    headers = {
        'Authorization': f'Bearer {ACCESS_TOKEN}',
        'Content-Type': 'application/json'
    }
    data = {
        'status': content
    }
    response = requests.post(MASTODON_API_URL, headers=headers, json=data)
    print(f'Request URL: {MASTODON_API_URL}')
    print(f'Request Headers: {headers}')
    print(f'Request Data: {data}')
    print(f'Response Status Code: {response.status_code}')
    print(f'Response Text: {response.text}')
    if response.status_code == 200:
        print('Successfully posted to Mastodon')
    else:
        print(f'Error posting to Mastodon: {response.status_code} - {response.text}')
</code>
<code>
def has_been_posted(post_url):
    if not os.path.exists(POSTED_URLS_FILE):
        return False
    with open(POSTED_URLS_FILE, 'r') as file:
        posted_urls = file.read().splitlines()
    return post_url in posted_urls
</code>
<code>
def mark_as_posted(post_url):
    with open(POSTED_URLS_FILE, 'a') as file:
        file.write(post_url + '\n')
</code>
<code>
if __name__ == '__main__':
    if len(sys.argv) != 2:
        print('Usage: python poast.py "Post URL"')
        sys.exit(1)
    post_url = sys.argv[1]
    print(f'Received post URL: {post_url}')
</code>
<code>    
    if has_been_posted(post_url):
        print(f'Post URL has already been posted: {post_url}')
        sys.exit(0)
</code>
<code>    
    summary, hashtag = extract_summary_and_tag(post_url)
    post_content = f"Today on Nova Prime: {post_url}\n\n{summary}\n\n{hashtag}"
    print(f'Constructed post content: {post_content}')
</code>
<code>    
    post_to_mastodon(post_content)
    mark_as_posted(post_url)
</code></p>

<p>As you can see, all sensitive information is being stored, <em>somewhere else</em>. In Github secrets! Which are injected into the Python script upon connection.</p>

<p>But, what this does, is it basically creates this situation where, now, my blog is kind of, sort of, federated? Not really, but it <em>acts</em> that way. Whenever I write a new post, and hit commit, the site builds, and then my account posts the generated matter. It‚Äôs as if my Mastodon account is now inside of VS Code. Which it totally could be! ‚Ä¶ if I wanted to post everything I write to Mastodon in links to my blog.</p>

<p>I lost a little sleep over this. I went to bed late last night, and then I woke up early to do more troubleshooting, and then I went to work with bags under my eyes, and then I came home, tired as all hell. And I kept going.</p>

<p>And now it‚Äôs done</p>

<p>It works.</p>

<p>Enjoy.</p>


<hr>
<br />
<span>tag: 
  
    
    <a href="/tag/programming"><code class="highligher"><nobr>programming</nobr></code>&nbsp;</a>
  
</span>


<button class="mastodon-share"></button><section class="page__comments">
  <h4 class="page__comments-title">COMMENTS</h4>
  <p>You can use your <a href="https://joinmastodon.org">Mastodon</a> or other <a class="page-link" href="/pages/activitypub/">ActivityPub</a> account to comment on this article by replying to the associated <a class="link" href="https://mkultra.monster/@cmdr_nova/113445308998637793">post</a>.</p>
  <p id="mastodon-comments-list">
    <button id="load-comment" class="btn btn--twitter">Load comments from the Fediverse</button>
  </p>
  <noscript><p>You have to allow JavaScript to view the comments.</p></noscript>
  <script src="/assets/js/purify.min.js"></script>
  <script type="text/javascript">
    function escapeHtml(unsafe) {
      return unsafe
           .replace(/&/g, "&amp;")
           .replace(/</g, "&lt;")
           .replace(/>/g, "&gt;")
           .replace(/"/g, "&quot;")
           .replace(/'/g, "&#039;");
    }

    function getInstanceFromAcct(acct) {
      const parts = acct.split('@');
      return parts.length > 1 ? parts[1] : '';
    }

    function renderMediaAttachments(attachments) {
      return attachments.map(attachment => {
        if (attachment.type === 'image') {
          return `<img src="${escapeHtml(attachment.url)}" alt="${escapeHtml(attachment.description || '')}" class="comment__media" />`;
        }
        return '';
      }).join('');
    }

    document.getElementById("load-comment").addEventListener("click", function() {
      document.getElementById("load-comment").innerHTML = "Loading";

      // Read the front matter values
      const host = "mkultra.monster";
      const username = "cmdr_nova";
      const postId = "113445308998637793";
      const hostAccountId = "111939142189797780"; // Host account ID

      fetch(`https://${host}/api/v1/statuses/${postId}/context`)
        .then(function(response) {
          console.log('API response:', response);
          return response.json();
        })
        .then(function(data) {
          console.log('API data:', data);
          if(data['descendants'] &&
             Array.isArray(data['descendants']) && 
            data['descendants'].length > 0) {
              document.getElementById('mastodon-comments-list').innerHTML = "";
              
              // Group comments by their parent ID
              const commentsByParentId = {};
              data['descendants'].forEach(function(reply) {
                const parentId = reply.in_reply_to_id || postId;
                if (!commentsByParentId[parentId]) {
                  commentsByParentId[parentId] = [];
                }
                commentsByParentId[parentId].push(reply);
              });

              console.log('Grouped comments by parent ID:', commentsByParentId);

              // Render comments
              function renderComments(parentId, depth) {
                if (depth > 10) return; // Determine depth of comments
                const comments = commentsByParentId[parentId] || [];
                comments.forEach(function(reply) {
                  const replyClass = parentId === postId ? 'reply-original' : 'reply-child';
                  const instance = reply.account.id === hostAccountId ? 'mkultra.monster' : getInstanceFromAcct(reply.account.acct);
                  console.log(`Comment ID: ${reply.id}, Instance: ${instance}, Host: ${host}, Account: ${reply.account.acct}`);
                  if(reply.account.display_name.length > 0) {
                    reply.account.display_name = escapeHtml(reply.account.display_name);
                    reply.account.emojis.forEach(emoji => {
                      reply.account.display_name = reply.account.display_name.replace(`:${emoji.shortcode}:`,
                      `<img class="no-center" src="${escapeHtml(emoji.static_url)}" alt="Emoji ${emoji.shortcode}" height="20" width="20" />`);
                    });
                  } else {
                    reply.account.display_name = reply.account.acct;
                  };
                  const sanitizedContent = DOMPurify.sanitize(reply.content, { ALLOWED_TAGS: ['img', 'p', 'a', 'span', 'br', 'strong', 'em', 'blockquote', 'code', 'pre'], ALLOWED_ATTR: ['src', 'alt', 'href', 'title', 'class', 'target', 'rel'] });
                  const mediaAttachments = renderMediaAttachments(reply.media_attachments);
                  const mastodonComment =
                    `<article id="comment-${reply.id}" class="js-comment comment ${replyClass}" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
                       <div class="js-comment comment">
                         ${replyClass === 'reply-child' ? '<i class="ph ph-arrow-elbow-down-right" style="font-size: 1.5em; position: absolute; left: -1.5em; top: 0.5em;"></i>' : ''}
                         <div class="comment__content-wrapper">
                          <h3 class="comment__author" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="comment__avatar no-center" src="${escapeHtml(reply.account.avatar_static)}" height=60 width=60 alt="">
                            <a rel="external nofollow" itemprop="url" href="${reply.account.url}" rel="nofollow">
                              <span>${reply.account.display_name}</span>
                            </a>
                          </h3>
                          <span class="comment__instance">@${instance}</span>
                          <p class="comment__date">
                            <a itemprop="url" href="${reply.uri}" rel="nofollow">${reply.created_at.substr(0, 10)}</a>
                          </p>
                          <br />
                          <div itemprop="text">${sanitizedContent}</div>
                          ${mediaAttachments}
                          <div class="status">
                            <i class="ph ph-arrow-bend-up-left ph-fw"></i> ${reply.replies_count}&nbsp; 
                            <i class="ph ph-repeat ph-fw"></i> ${reply.reblogs_count}&nbsp;
                            <i class="ph ph-star ph-fw"></i> ${reply.favourites_count}
                          </div> 
                         </div>
                        </div>
                      </article>`;
                  const commentElement = DOMPurify.sanitize(mastodonComment, {RETURN_DOM_FRAGMENT: true});
                  document.getElementById('mastodon-comments-list').appendChild(commentElement);
                  console.log(`Rendered comment ID: ${reply.id}, Parent ID: ${parentId}, Depth: ${depth}`);
                  renderComments(reply.id, depth + 1); // Render child comments
                });
              }

              // Start rendering from the root post ID
              console.log('Rendering comments for post ID:', postId);
              renderComments(postId, 0);
          } else {
            document.getElementById('mastodon-comments-list').innerHTML = "<p>No comments found (yet! be the first!)</p>";
          }
        })
        .catch(function(error) {
          console.error('Error fetching comments:', error);
          document.getElementById('mastodon-comments-list').innerHTML = "<p>Error loading comments. Please try again later.</p>";
        });
      });
  </script>
</section></md-block>
</span>
  </td>
  </tr>
  </table>
</div>
      </div>
    </main>
<footer>

  <table>

    <tr>
      <td>

        soma.fm:
        <div id="song">
          <center>
          <a id="player-text" href="https://somafm.com/deepspaceone/index.html" target="_blank"></a>
          </center>
          </div>
          <br />
          <div id="player">
          <center>
          <a id="player-stop" href="javascript:void(0)"><i class="ph ph-stop"></i></a>
          <a id="player-play" href="javascript:void(0)"><i class="ph ph-play"></i></a>
          <br />
          <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.5">
          <audio id="internet-radio" src="https://ice2.somafm.com/deepspaceone-128-mp3"></audio>
          <script src='/assets/js/stream.js'></script>
          <script src='/assets/js/radio.js'></script>
        </center>
        </div>
  <br />

      <!-- Mastodon Feed Start-->
      <div id="mastodon"></div>

      <script src="/assets/js/mastodon.js"></script>
    <!-- Mastodon Feed End-->

    <br />

    <p align="center">
      <img src="/img/3.gif" />
    </p>


          <br />

    webrings:
    <div class="center">
    <p align="center">
      <a href="https://xn--sr8hvo.ws/previous">‚Üê</a>
      üï∏ <a href="https://xn--sr8hvo.ws">IndieWeb</a> üíç
<a href="https://xn--sr8hvo.ws/next">‚Üí</a>
</p>

<p align="center">
<a href='https://webring.dinhe.net/prev/https://nova-prime.net/'>‚Üê </a>
:: <a href="https://webring.dinhe.net/" target="_blank">Retronaut</a> ::
<a href='https://webring.dinhe.net/next/https://nova-prime.net/'> ‚Üí </a>

</p>

<p align="center">
  <a href="https://fediring.net/previous?host=nova.mkultra.monster">‚Üê</a>
  <a href="https://fediring.net/">Fediring</a>
  <a href="https://fediring.net/next?host=nova.mkultra.monster">‚Üí</a>
</p>

<div style="width: fit-content; border: 2px outset; text-align:center" class="furry">
<p style="margin: 0; padding: 0.1em; border: 2px inset">This site is a member of Fur Ring.</p>
<div style="display: flex">
    <a style="flex: 1; margin: 0; padding: 0.1em; border: 2px inset" href="https://webri.ng/webring/furring/previous?via=https://nova.mkultra.monster">Previous Site</a>
    <a style="flex: 1; margin: 0; padding: 0.1em; border: 2px inset" href="https://webri.ng/webring/furring/random?via=https://nova.mkultra.monster">Random Site</a>
    <a style="flex: 1; margin: 0; padding: 0.1em; border: 2px inset" href="https://webri.ng/webring/furring/next?via=https://nova.mkultra.monster">Next Site</a>
</div>
</div>
<br />

<div id='linuxring'>
<script type="text/javascript" src="https://teethinvitro.neocities.org/webring/linuxring/script/onionring-variables.js"></script>
<script type="text/javascript" src="https://teethinvitro.neocities.org/webring/linuxring/script/onionring-widget.js"></script>
</div>
<br />

<p align="center">
<object id="melonland-surf-club" data="https://melonland.net/surf-badge.svg?fill=#8ff0a4" type="image/svg+xml" style="width: 100px; height: 100px;"></object>
</p> 
</div>
<div id="calendar">
  <script src="/assets/js/calendar.js"></script>
</div>
<br />
<img src="/img/haxpunks_logo.png">
<div id="random-image-container"></div>
<script src="/assets/js/randomImage.js"></script>
</div>
<br />
<div id="mastodon-trending"></div>
<script src="/assets/js/mastodon-trending.js"></script>
<br />
<!-- Second Life Online Users Start -->
<div id="second-life-online"></div>
<script src="/assets/js/second-life.js"></script>
<!-- Second Life Online Users End -->


<!-- RSS Feed Start -->
<div id="rss-feed"></div>
<script src="/assets/js/rss-feed.js"></script>


    </div>

    <br />


<br />
</div>
  </td>
</tr>
</table>

</footer></body>

</html>
